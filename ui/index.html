<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Flight Crawler Control Panel</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        section { margin-bottom: 30px; }
        input[type=text] { width: 200px; }
        pre { background: #f3f3f3; padding: 10px; white-space: pre-wrap; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<h1>Flight Crawler Control Panel</h1>

<section id="search">
    <h2>Search Flights</h2>
    <form id="searchForm">
        <label>Origin: <input id="origin" required></label><br>
        <label>Destination: <input id="destination" required></label><br>
        <label>Language:
            <select id="language">
                <option value="en">English</option>
                <option value="fa">فارسی</option>
            </select>
        </label><br>
        <label>Date: <input id="date" placeholder="YYYY-MM-DD" required></label><br>
        <button type="submit">Search</button>
    </form>
    <div id="searchResult"></div>
</section>

<section>
    <h2>Health</h2>
    <button onclick="getHealth()">Check Health</button>
    <pre id="healthResult"></pre>
</section>

<section>
    <h2>Metrics</h2>
    <button onclick="getMetrics()">Get Metrics</button>
    <pre id="metricsResult"></pre>
</section>

<section>
    <h2>Stats</h2>
    <button onclick="getStats()">Get Stats</button>
    <button onclick="resetStats()">Reset Stats</button>
    <pre id="statsResult"></pre>
</section>

<section id="predict">
    <h2>Price Prediction</h2>
    <form id="predictForm">
        <label>Route (ORIG-DST): <input id="predictRoute" required></label><br>
        <label>Dates (comma separated): <input id="predictDates" required></label><br>
        <button type="submit">Predict</button>
    </form>
    <pre id="predictResult"></pre>
</section>

<section id="intelligentSearch">
    <h2>Intelligent Search</h2>
    <form id="intelligentForm">
        <label>Origin: <input id="intOrigin" required></label><br>
        <label>Destination: <input id="intDestination" required></label><br>
        <label>Date: <input id="intDate" placeholder="YYYY-MM-DD" required></label><br>
        <label><input type="checkbox" id="multiRoute" checked> Multi Route</label><br>
        <label><input type="checkbox" id="dateRange" checked> Date Range</label><br>
        <label>Range Days: <input id="dateRangeDays" type="number" value="3"></label><br>
        <button type="submit">Search</button>
    </form>
    <pre id="intelligentResult"></pre>
</section>

<section id="priceUpdates">
    <h2>Price Updates (WebSocket)</h2>
    <label>User ID: <input id="wsUserId" value="user1"></label>
    <button id="connectWs">Connect</button>
    <pre id="wsResult"></pre>
</section>

<section id="alerts">
    <h2>Price Alerts</h2>
    <form id="alertForm">
        <label>User ID: <input id="alertUser" value="user1"></label><br>
        <label>Route: <input id="alertRoute" placeholder="ORIG-DST"></label><br>
        <label>Target Price: <input id="alertPrice" type="number"></label><br>
        <button type="submit">Add Alert</button>
    </form>
    <button onclick="loadAlerts()">Refresh Alerts</button>
    <ul id="alertList"></ul>
</section>

<section id="monitoring">
    <h2>Price Monitoring</h2>
    <label>Routes: <input id="monitorRoutes" placeholder="route1,route2"></label>
    <button onclick="startMonitoring()">Start</button>
    <button onclick="stopMonitoring()">Stop</button>
    <div>Active: <span id="monitorStatus"></span></div>
</section>

<section id="trend">
    <h2>Price Trend</h2>
    <label>Route: <input id="trendRoute" placeholder="ORIG-DST"></label>
    <button onclick="showTrend()">Show</button>
    <canvas id="trendChart" width="400" height="200"></canvas>
</section>

<script src="app.js"></script>
</body>
</html>
